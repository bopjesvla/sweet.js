"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _tokenizer = require("shift-parser/dist/tokenizer");

var _tokenizer2 = _interopRequireDefault(_tokenizer);

var _immutable = require("immutable");

var _syntax = require("./syntax");

var _syntax2 = _interopRequireDefault(_syntax);

var _ramda = require("ramda");

var R = _interopRequireWildcard(_ramda);

var _ramdaFantasy = require("ramda-fantasy");

var _errors = require("./errors");

var _terms = require("./terms");

var _terms2 = _interopRequireDefault(_terms);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Just_488 = _ramdaFantasy.Maybe.Just;
var Nothing_489 = _ramdaFantasy.Maybe.Nothing;

var LSYNTAX_490 = { name: "left-syntax" };
var RSYNTAX_491 = { name: "right-syntax" };
var AT_492 = { klass: _tokenizer.TokenClass.Punctuator, name: "@" };
var literalKeywords_493 = ["this", "null", "true", "false"];
var isLeftBracket_494 = R.whereEq({ type: _tokenizer.TokenType.LBRACK });
var isLeftBrace_495 = R.whereEq({ type: _tokenizer.TokenType.LBRACE });
var isLeftParen_496 = R.whereEq({ type: _tokenizer.TokenType.LPAREN });
var isRightBracket_497 = R.whereEq({ type: _tokenizer.TokenType.RBRACK });
var isRightBrace_498 = R.whereEq({ type: _tokenizer.TokenType.RBRACE });
var isRightParen_499 = R.whereEq({ type: _tokenizer.TokenType.RPAREN });
var isEOS_500 = R.whereEq({ type: _tokenizer.TokenType.EOS });
var isHash_501 = R.whereEq({ type: _tokenizer.TokenType.IDENTIFIER, value: "#" });
var isLeftSyntax_502 = R.whereEq({ type: LSYNTAX_490 });
var isRightSyntax_503 = R.whereEq({ type: RSYNTAX_491 });
var isLeftDelimiter_504 = R.anyPass([isLeftBracket_494, isLeftBrace_495, isLeftParen_496, isLeftSyntax_502]);
var isRightDelimiter_505 = R.anyPass([isRightBracket_497, isRightBrace_498, isRightParen_499, isRightSyntax_503]);
var isMatchingDelimiters_506 = R.cond([[isLeftBracket_494, function (__547, b_548) {
  return isRightBracket_497(b_548);
}], [isLeftBrace_495, function (__549, b_550) {
  return isRightBrace_498(b_550);
}], [isLeftParen_496, function (__551, b_552) {
  return isRightParen_499(b_552);
}], [isLeftSyntax_502, function (__553, b_554) {
  return isRightSyntax_503(b_554);
}], [R.T, R.F]]);
var assignOps_507 = ["=", "+=", "-=", "*=", "/=", "%=", "<<=", ">>=", ">>>=", "&=", "|=", "^=", ","];
var binaryOps_508 = ["+", "-", "*", "/", "%", "<<", ">>", ">>>", "&", "|", "^", "&&", "||", "?", ":", "===", "==", ">=", "<=", "<", ">", "!=", "!==", "instanceof"];
var unaryOps_509 = ["++", "--", "~", "!", "delete", "void", "typeof", "yield", "throw", "new"];
var isEmpty_510 = R.whereEq({ size: 0 });
var isPunctuator_511 = function isPunctuator_511(s_555) {
  return s_555.isPunctuator();
};
var isKeyword_512 = function isKeyword_512(s_556) {
  return s_556.isKeyword();
};
var isDelimiter_513 = function isDelimiter_513(s_557) {
  return s_557.isDelimiter();
};
var isParens_514 = function isParens_514(s_558) {
  return s_558.isParens();
};
var isBraces_515 = function isBraces_515(s_559) {
  return s_559.isBraces();
};
var isBrackets_516 = function isBrackets_516(s_560) {
  return s_560.isBrackets();
};
var isIdentifier_517 = function isIdentifier_517(s_561) {
  return s_561.isIdentifier();
};
var val_518 = function val_518(s_562) {
  return s_562.val();
};
var isVal_519 = R.curry(function (v_563, s_564) {
  return s_564.val() === v_563;
});
var isDot_520 = R.allPass([isPunctuator_511, isVal_519(".")]);
var isColon_521 = R.allPass([isPunctuator_511, isVal_519(":")]);
var isFunctionKeyword_522 = R.allPass([isKeyword_512, isVal_519("function")]);
var isOperator_523 = function isOperator_523(s_565) {
  return (s_565.isPunctuator() || s_565.isKeyword()) && R.any(R.equals(s_565.val()), assignOps_507.concat(binaryOps_508).concat(unaryOps_509));
};
var isNonLiteralKeyword_524 = R.allPass([isKeyword_512, function (s_566) {
  return R.none(R.equals(s_566.val()), literalKeywords_493);
}]);
var isKeywordExprPrefix_525 = R.allPass([isKeyword_512, function (s_567) {
  return R.any(R.equals(s_567.val()), ["instanceof", "typeof", "delete", "void", "yield", "throw", "new", "case"]);
}]);
var last_526 = function last_526(p_568) {
  return p_568.last();
};
var safeLast_527 = R.pipe(R.cond([[isEmpty_510, R.always(Nothing_489())], [R.T, R.compose(_ramdaFantasy.Maybe.of, last_526)]]));
var stuffTrue_528 = R.curry(function (p_569, b_570) {
  return b_570 ? Just_488(p_569) : Nothing_489();
});
var stuffFalse_529 = R.curry(function (p_571, b_572) {
  return !b_572 ? Just_488(p_571) : Nothing_489();
});
var isTopColon_530 = R.pipe(safeLast_527, R.map(isColon_521), _ramdaFantasy.Maybe.maybe(false, R.identity));
var isTopPunctuator_531 = R.pipe(safeLast_527, R.map(isPunctuator_511), _ramdaFantasy.Maybe.maybe(false, R.identity));
var isExprReturn_532 = R.curry(function (l_573, p_574) {
  var retKwd_575 = safeLast_527(p_574);
  var maybeDot_576 = pop_543(p_574).chain(safeLast_527);
  if (maybeDot_576.map(isDot_520).getOrElse(false)) {
    return true;
  }
  return retKwd_575.map(function (s_577) {
    return s_577.isKeyword() && s_577.val() === "return" && s_577.lineNumber() === l_573;
  }).getOrElse(false);
});
var isTopOperator_533 = R.pipe(safeLast_527, R.map(isOperator_523), _ramdaFantasy.Maybe.maybe(false, R.identity));
var isTopKeywordExprPrefix_534 = R.pipe(safeLast_527, R.map(isKeywordExprPrefix_525), _ramdaFantasy.Maybe.maybe(false, R.identity));
var isExprPrefix_535 = R.curry(function (l_578, b_579) {
  return R.cond([[isEmpty_510, R.always(b_579)], [isTopColon_530, R.always(b_579)], [isTopKeywordExprPrefix_534, R.T], [isTopOperator_533, R.T], [isTopPunctuator_531, R.always(b_579)], [isExprReturn_532(l_578), R.T], [R.T, R.F]]);
});
var curly_536 = function curly_536(p_580) {
  return safeLast_527(p_580).map(isBraces_515).chain(stuffTrue_528(p_580));
};
var paren_537 = function paren_537(p_581) {
  return safeLast_527(p_581).map(isParens_514).chain(stuffTrue_528(p_581));
};
var func_538 = function func_538(p_582) {
  return safeLast_527(p_582).map(isFunctionKeyword_522).chain(stuffTrue_528(p_582));
};
var ident_539 = function ident_539(p_583) {
  return safeLast_527(p_583).map(isIdentifier_517).chain(stuffTrue_528(p_583));
};
var nonLiteralKeyword_540 = function nonLiteralKeyword_540(p_584) {
  return safeLast_527(p_584).map(isNonLiteralKeyword_524).chain(stuffTrue_528(p_584));
};
var opt_541 = R.curry(function (a_585, b_586, p_587) {
  var result_588 = R.pipeK(a_585, b_586)(_ramdaFantasy.Maybe.of(p_587));
  return _ramdaFantasy.Maybe.isJust(result_588) ? result_588 : _ramdaFantasy.Maybe.of(p_587);
});
var notDot_542 = R.ifElse(R.whereEq({ size: 0 }), Just_488, function (p_589) {
  return safeLast_527(p_589).map(function (s_590) {
    return !(s_590.isPunctuator() && s_590.val() === ".");
  }).chain(stuffTrue_528(p_589));
});
var pop_543 = R.compose(Just_488, function (p_591) {
  return p_591.pop();
});
var functionPrefix_544 = R.pipeK(curly_536, pop_543, paren_537, pop_543, opt_541(ident_539, pop_543), func_538);
var isRegexPrefix_545 = function isRegexPrefix_545(b_592) {
  return R.anyPass([isEmpty_510, isTopPunctuator_531, R.pipe(_ramdaFantasy.Maybe.of, R.pipeK(nonLiteralKeyword_540, pop_543, notDot_542), _ramdaFantasy.Maybe.isJust), R.pipe(_ramdaFantasy.Maybe.of, R.pipeK(paren_537, pop_543, nonLiteralKeyword_540, pop_543, notDot_542), _ramdaFantasy.Maybe.isJust), R.pipe(_ramdaFantasy.Maybe.of, functionPrefix_544, R.chain(function (p_593) {
    return safeLast_527(p_593).map(function (s_594) {
      return s_594.lineNumber();
    }).chain(function (fnLine_595) {
      return pop_543(p_593).map(isExprPrefix_535(fnLine_595, b_592));
    }).chain(stuffFalse_529(p_593));
  }), _ramdaFantasy.Maybe.isJust), function (p_596) {
    var isCurly_597 = _ramdaFantasy.Maybe.isJust(safeLast_527(p_596).map(isBraces_515));
    var alreadyCheckedFunction_598 = R.pipe(_ramdaFantasy.Maybe.of, functionPrefix_544, _ramdaFantasy.Maybe.isJust)(p_596);
    if (alreadyCheckedFunction_598) {
      return false;
    }
    return R.pipe(_ramdaFantasy.Maybe.of, R.chain(curly_536), R.chain(function (p_599) {
      return safeLast_527(p_599).map(function (s_600) {
        return s_600.lineNumber();
      }).chain(function (curlyLine_601) {
        return pop_543(p_599).map(isExprPrefix_535(curlyLine_601, b_592));
      }).chain(stuffFalse_529(p_599));
    }), _ramdaFantasy.Maybe.isJust)(p_596);
  }]);
};
function lastEl_546(l_602) {
  return l_602[l_602.length - 1];
}

var Reader = (function (_Tokenizer) {
  _inherits(Reader, _Tokenizer);

  function Reader(strings_603, context_604, replacements_605) {
    _classCallCheck(this, Reader);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Reader).call(this, Array.isArray(strings_603) ? strings_603.join("") : strings_603));

    _this.delimStack = new Map();
    _this.insideSyntaxTemplate = [false];
    _this.context = context_604;
    if (Array.isArray(strings_603)) {
      (function () {
        var totalIndex = 0;
        _this.replacementIndex = R.reduce(function (acc_606, strRep_607) {
          acc_606.push({ index: totalIndex + strRep_607[0].length, replacement: strRep_607[1] });
          totalIndex += strRep_607[0].length;
          return acc_606;
        }, [], R.zip(strings_603, replacements_605));
      })();
    }
    return _this;
  }

  _createClass(Reader, [{
    key: "read",
    value: function read() {
      var stack_608 = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];
      var b_609 = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];
      var singleDelimiter_610 = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];

      var prefix_611 = (0, _immutable.List)();
      while (true) {
        var tok = this.advance(prefix_611, b_609);
        if (tok instanceof _syntax2.default || tok instanceof _terms2.default) {
          stack_608.push(tok);
          continue;
        }
        if (Array.isArray(tok)) {
          Array.prototype.push.apply(stack_608, tok);
          continue;
        }
        if (_immutable.List.isList(tok)) {
          Array.prototype.push.apply(stack_608, tok.toArray());
          continue;
        }
        if (isEOS_500(tok)) {
          if (stack_608[0] && isLeftDelimiter_504(stack_608[0].token)) {
            throw this.createUnexpected(tok);
          }
          break;
        }
        if (isLeftDelimiter_504(tok)) {
          if (isLeftSyntax_502(tok)) {
            this.insideSyntaxTemplate.push(true);
          }
          var line = tok.slice.startLocation.line;
          var innerB = isLeftBrace_495(tok) ? isExprPrefix_535(line, b_609)(prefix_611) : true;
          var inner = this.read([new _syntax2.default(tok)], innerB, false);
          var stx = new _syntax2.default(inner, this.context);
          prefix_611 = prefix_611.concat(stx);
          stack_608.push(stx);
          if (singleDelimiter_610) {
            break;
          }
        } else if (isRightDelimiter_505(tok)) {
          if (stack_608[0] && !isMatchingDelimiters_506(stack_608[0].token, tok)) {
            throw this.createUnexpected(tok);
          }
          var stx = new _syntax2.default(tok, this.context);
          stack_608.push(stx);
          if (lastEl_546(this.insideSyntaxTemplate) && isRightSyntax_503(tok)) {
            this.insideSyntaxTemplate.pop();
          }
          break;
        } else {
          var stx = new _syntax2.default(tok, this.context);
          prefix_611 = prefix_611.concat(stx);
          stack_608.push(stx);
        }
      }
      return (0, _immutable.List)(stack_608);
    }
  }, {
    key: "advance",
    value: function advance(prefix_612, b_613) {
      var startLocation_614 = this.getLocation();
      this.lastIndex = this.index;
      this.lastLine = this.line;
      this.lastLineStart = this.lineStart;
      this.skipComment();
      this.startIndex = this.index;
      this.startLine = this.line;
      this.startLineStart = this.lineStart;
      if (this.replacementIndex && this.replacementIndex[0] && this.index >= this.replacementIndex[0].index) {
        var rep = this.replacementIndex[0].replacement;
        this.replacementIndex.shift();
        return rep;
      }
      var charCode_615 = this.source.charCodeAt(this.index);
      if (charCode_615 === 96) {
        var element = undefined,
            items = [];
        var _startLocation_ = this.getLocation();
        var start = this.index;
        this.index++;
        if (lastEl_546(this.insideSyntaxTemplate)) {
          var slice = this.getSlice(start, _startLocation_);
          return { type: RSYNTAX_491, value: "`", slice: slice };
        }
        do {
          element = this.scanTemplateElement();
          items.push(element);
          if (element.interp) {
            element = this.read([], false, true);
            (0, _errors.assert)(element.size === 1, "should only have read a single delimiter inside a template");
            items.push(element.get(0));
          }
        } while (!element.tail);
        return { type: _tokenizer.TokenType.TEMPLATE, items: (0, _immutable.List)(items) };
      } else if (charCode_615 === 35) {
        var _startLocation_2 = this.getLocation();
        var start = this.index;
        var slice = this.getSlice(start, _startLocation_2);
        this.index++;
        if (this.source.charCodeAt(this.index) === 96) {
          this.index++;
          return { type: LSYNTAX_490, value: "#`", slice: slice };
        }
        return { type: _tokenizer.TokenType.IDENTIFIER, value: "#", slice: slice };
      } else if (charCode_615 === 64) {
        var _startLocation_3 = this.getLocation();
        var start = this.index;
        var slice = this.getSlice(start, _startLocation_3);
        this.index++;
        return { type: AT_492, value: "@", slice: slice };
      }
      var lookahead_616 = _get(Object.getPrototypeOf(Reader.prototype), "advance", this).call(this);
      if (lookahead_616.type === _tokenizer.TokenType.DIV && isRegexPrefix_545(b_613)(prefix_612)) {
        return _get(Object.getPrototypeOf(Reader.prototype), "scanRegExp", this).call(this, "/");
      }
      return lookahead_616;
    }
  }, {
    key: "scanTemplateElement",
    value: function scanTemplateElement() {
      var startLocation_617 = this.getLocation();
      var start_618 = this.index;
      while (this.index < this.source.length) {
        var ch = this.source.charCodeAt(this.index);
        switch (ch) {
          case 96:
            var slice = this.getSlice(start_618, startLocation_617);
            this.index++;
            return { type: _tokenizer.TokenType.TEMPLATE, tail: true, interp: false, slice: slice };
          case 36:
            if (this.source.charCodeAt(this.index + 1) === 123) {
              var _slice = this.getSlice(start_618, startLocation_617);
              this.index += 1;
              return { type: _tokenizer.TokenType.TEMPLATE, tail: false, interp: true, slice: _slice };
            }
            this.index++;
            break;
          case 92:
            {
              var octal = this.scanStringEscape("", null)[1];
              if (octal != null) {
                throw this.createILLEGAL();
              }
              break;
            }
          default:
            this.index++;
        }
      }
      throw this.createILLEGAL();
    }
  }]);

  return Reader;
})(_tokenizer2.default);

exports.default = Reader;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3N3ZWV0L3NoaWZ0LXJlYWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBSWEsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHZCxJQUFNLFFBQVEsR0FBRyxvQkFBTSxJQUFJLENBQUM7QUFDNUIsSUFBTSxXQUFXLEdBQUcsb0JBQU0sT0FBTyxDQUFDOztBQUVsQyxJQUFNLFdBQVcsR0FBRyxFQUFDLElBQUksRUFBRSxhQUFhLEVBQUMsQ0FBQztBQUMxQyxJQUFNLFdBQVcsR0FBRyxFQUFDLElBQUksRUFBRSxjQUFjLEVBQUMsQ0FBQztBQUMzQyxJQUFNLE1BQU0sR0FBRyxFQUFDLEtBQUssRUFBRSxzQkFBVyxVQUFVLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBQyxDQUFDO0FBQ3pELElBQU0sbUJBQW1CLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUM5RCxJQUFNLGlCQUFpQixHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBQyxJQUFJLEVBQUUscUJBQVUsTUFBTSxFQUFDLENBQUMsQ0FBQztBQUM5RCxJQUFNLGVBQWUsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUMsSUFBSSxFQUFFLHFCQUFVLE1BQU0sRUFBQyxDQUFDLENBQUM7QUFDNUQsSUFBTSxlQUFlLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFDLElBQUksRUFBRSxxQkFBVSxNQUFNLEVBQUMsQ0FBQyxDQUFDO0FBQzVELElBQU0sa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFDLElBQUksRUFBRSxxQkFBVSxNQUFNLEVBQUMsQ0FBQyxDQUFDO0FBQy9ELElBQU0sZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFDLElBQUksRUFBRSxxQkFBVSxNQUFNLEVBQUMsQ0FBQyxDQUFDO0FBQzdELElBQU0sZ0JBQWdCLEdBQUcsQ0FBQyxDQUFD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Q0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFO0FBQ2xELGtCQUFJLE1BQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3hELGtCQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQztBQUNoQixxQkFBTyxFQUFDLElBQUksRUFBRSxxQkFBVSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFLLEVBQUMsQ0FBQzthQUM1RTtBQUNELGdCQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDYixrQkFBTTtBQUFBLEFBQ1IsZUFBSyxFQUFFO0FBQ0w7QUFDRSxrQkFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQyxrQkFBSSxLQUFLLElBQUksSUFBSSxFQUFFO0FBQ2pCLHNCQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztlQUM1QjtBQUNELG9CQUFNO2FBQ1A7QUFBQSxBQUNIO0FBQ0UsZ0JBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUFBLFNBQ2hCO09BQ0Y7QUFDRCxZQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztLQUM1Qjs7O1NBNUprQixNQUFNOzs7a0JBQU4sTUFBTSIsImZpbGUiOiJzaGlmdC1yZWFkZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVG9rZW5pemVyIGZyb20gXCJzaGlmdC1wYXJzZXIvZGlzdC90b2tlbml6ZXJcIjtcbmltcG9ydCB7VG9rZW5DbGFzcywgVG9rZW5UeXBlfSBmcm9tIFwic2hpZnQtcGFyc2VyL2Rpc3QvdG9rZW5pemVyXCI7XG5pbXBvcnQge0xpc3R9IGZyb20gXCJpbW11dGFibGVcIjtcbmltcG9ydCBTeW50YXggZnJvbSBcIi4vc3ludGF4XCI7XG5pbXBvcnQgICogYXMgUiBmcm9tIFwicmFtZGFcIjtcbmltcG9ydCB7TWF5YmV9IGZyb20gXCJyYW1kYS1mYW50YXN5XCI7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSBcIi4vZXJyb3JzXCI7XG5jb25zdCBKdXN0XzQ4OCA9IE1heWJlLkp1c3Q7XG5jb25zdCBOb3RoaW5nXzQ4OSA9IE1heWJlLk5vdGhpbmc7XG5pbXBvcnQgVGVybSBmcm9tIFwiLi90ZXJtc1wiO1xuY29uc3QgTFNZTlRBWF80OTAgPSB7bmFtZTogXCJsZWZ0LXN5bnRheFwifTtcbmNvbnN0IFJTWU5UQVhfNDkxID0ge25hbWU6IFwicmlnaHQtc3ludGF4XCJ9O1xuY29uc3QgQVRfNDkyID0ge2tsYXNzOiBUb2tlbkNsYXNzLlB1bmN0dWF0b3IsIG5hbWU6IFwiQFwifTtcbmNvbnN0IGxpdGVyYWxLZXl3b3Jkc180OTMgPSBbXCJ0aGlzXCIsIFwibnVsbFwiLCBcInRydWVcIiwgXCJmYWxzZVwiXTtcbmNvbnN0IGlzTGVmdEJyYWNrZXRfNDk0ID0gUi53aGVyZUVxKHt0eXBlOiBUb2tlblR5cGUuTEJSQUNLfSk7XG5jb25zdCBpc0xlZnRCcmFjZV80OTUgPSBSLndoZXJlRXEoe3R5cGU6IFRva2VuVHlwZS5MQlJBQ0V9KTtcbmNvbnN0IGlzTGVmdFBhcmVuXzQ5NiA9IFIud2hlcmVFcSh7dHlwZTogVG9rZW5UeXBlLkxQQVJFTn0pO1xuY29uc3QgaXNSaWdodEJyYWNrZXRfNDk3ID0gUi53aGVyZUVxKHt0eXBlOiBUb2tlblR5cGUuUkJSQUNLfSk7XG5jb25zdCBpc1JpZ2h0QnJhY2VfNDk4ID0gUi53aGVyZUVxKHt0eXBlOiBUb2tlblR5cGUuUkJSQUNFfSk7XG5jb25zdCBpc1JpZ2h0UGFyZW5fNDk5ID0gUi53aGVyZUVxKHt0eXBlOiBUb2tlblR5cGUuUlBBUkVOfSk7XG5jb25zdCBpc0VPU181MDAgPSBSLndoZXJlRXEoe3R5cGU6IFRva2VuVHlwZS5FT1N9KTtcbmNvbnN0IGlzSGFzaF81MDEgPSBSLndoZXJlRXEoe3R5cGU6IFRva2VuVHlwZS5JREVOVElGSUVSLCB2YWx1ZTogXCIjXCJ9KTtcbmNvbnN0IGlzTGVmdFN5bnRheF81MDIgPSBSLndoZXJlRXEoe3R5cGU6IExTWU5UQVhfNDkwfSk7XG5jb25zdCBpc1JpZ2h0U3ludGF4XzUwMyA9IFIud2hlcmVFcSh7dHlwZTogUlNZTlRBWF80OTF9KTtcbmNvbnN0IGlzTGVmdERlbGltaXRlcl81MDQgPSBSLmFueVBhc3MoW2lzTGVmdEJyYWNrZXRfNDk0LCBpc0xlZnRCcmFjZV80OTUsIGlzTGVmdFBhcmVuXzQ5NiwgaXNMZWZ0U3ludGF4XzUwMl0pO1xuY29uc3QgaXNSaWdodERlbGltaXRlcl81MDUgPSBSLmFueVBhc3MoW2lzUmlnaHRCcmFja2V0XzQ5NywgaXNSaWdodEJyYWNlXzQ5OCwgaXNSaWdodFBhcmVuXzQ5OSwgaXNSaWdodFN5bnRheF81MDNdKTtcbmNvbnN0IGlzTWF0Y2hpbmdEZWxpbWl0ZXJzXzUwNiA9IFIuY29uZChbW2lzTGVmdEJyYWNrZXRfNDk0LCAoX181NDcsIGJfNTQ4KSA9PiBpc1JpZ2h0QnJhY2tldF80OTcoYl81NDgpXSwgW2lzTGVmdEJyYWNlXzQ5NSwgKF9fNTQ5LCBiXzU1MCkgPT4gaXNSaWdodEJyYWNlXzQ5OChiXzU1MCldLCBbaXNMZWZ0UGFyZW5fNDk2LCAoX181NTEsIGJfNTUyKSA9PiBpc1JpZ2h0UGFyZW5fNDk5KGJfNTUyKV0sIFtpc0xlZnRTeW50YXhfNTAyLCAoX181NTMsIGJfNTU0KSA9PiBpc1JpZ2h0U3ludGF4XzUwMyhiXzU1NCldLCBbUi5ULCBSLkZdXSk7XG5jb25zdCBhc3NpZ25PcHNfNTA3ID0gW1wiPVwiLCBcIis9XCIsIFwiLT1cIiwgXCIqPVwiLCBcIi89XCIsIFwiJT1cIiwgXCI8PD1cIiwgXCI+Pj1cIiwgXCI+Pj49XCIsIFwiJj1cIiwgXCJ8PVwiLCBcIl49XCIsIFwiLFwiXTtcbmNvbnN0IGJpbmFyeU9wc181MDggPSBbXCIrXCIsIFwiLVwiLCBcIipcIiwgXCIvXCIsIFwiJVwiLCBcIjw8XCIsIFwiPj5cIiwgXCI+Pj5cIiwgXCImXCIsIFwifFwiLCBcIl5cIiwgXCImJlwiLCBcInx8XCIsIFwiP1wiLCBcIjpcIiwgXCI9PT1cIiwgXCI9PVwiLCBcIj49XCIsIFwiPD1cIiwgXCI8XCIsIFwiPlwiLCBcIiE9XCIsIFwiIT09XCIsIFwiaW5zdGFuY2VvZlwiXTtcbmNvbnN0IHVuYXJ5T3BzXzUwOSA9IFtcIisrXCIsIFwiLS1cIiwgXCJ+XCIsIFwiIVwiLCBcImRlbGV0ZVwiLCBcInZvaWRcIiwgXCJ0eXBlb2ZcIiwgXCJ5aWVsZFwiLCBcInRocm93XCIsIFwibmV3XCJdO1xuY29uc3QgaXNFbXB0eV81MTAgPSBSLndoZXJlRXEoe3NpemU6IDB9KTtcbmNvbnN0IGlzUHVuY3R1YXRvcl81MTEgPSBzXzU1NSA9PiBzXzU1NS5pc1B1bmN0dWF0b3IoKTtcbmNvbnN0IGlzS2V5d29yZF81MTIgPSBzXzU1NiA9PiBzXzU1Ni5pc0tleXdvcmQoKTtcbmNvbnN0IGlzRGVsaW1pdGVyXzUxMyA9IHNfNTU3ID0+IHNfNTU3LmlzRGVsaW1pdGVyKCk7XG5jb25zdCBpc1BhcmVuc181MTQgPSBzXzU1OCA9PiBzXzU1OC5pc1BhcmVucygpO1xuY29uc3QgaXNCcmFjZXNfNTE1ID0gc181NTkgPT4gc181NTkuaXNCcmFjZXMoKTtcbmNvbnN0IGlzQnJhY2tldHNfNTE2ID0gc181NjAgPT4gc181NjAuaXNCcmFja2V0cygpO1xuY29uc3QgaXNJZGVudGlmaWVyXzUxNyA9IHNfNTYxID0+IHNfNTYxLmlzSWRlbnRpZmllcigpO1xuY29uc3QgdmFsXzUxOCA9IHNfNTYyID0+IHNfNTYyLnZhbCgpO1xuY29uc3QgaXNWYWxfNTE5ID0gUi5jdXJyeSgodl81NjMsIHNfNTY0KSA9PiBzXzU2NC52YWwoKSA9PT0gdl81NjMpO1xuY29uc3QgaXNEb3RfNTIwID0gUi5hbGxQYXNzKFtpc1B1bmN0dWF0b3JfNTExLCBpc1ZhbF81MTkoXCIuXCIpXSk7XG5jb25zdCBpc0NvbG9uXzUyMSA9IFIuYWxsUGFzcyhbaXNQdW5jdHVhdG9yXzUxMSwgaXNWYWxfNTE5KFwiOlwiKV0pO1xuY29uc3QgaXNGdW5jdGlvbktleXdvcmRfNTIyID0gUi5hbGxQYXNzKFtpc0tleXdvcmRfNTEyLCBpc1ZhbF81MTkoXCJmdW5jdGlvblwiKV0pO1xuY29uc3QgaXNPcGVyYXRvcl81MjMgPSBzXzU2NSA9PiAoc181NjUuaXNQdW5jdHVhdG9yKCkgfHwgc181NjUuaXNLZXl3b3JkKCkpICYmIFIuYW55KFIuZXF1YWxzKHNfNTY1LnZhbCgpKSwgYXNzaWduT3BzXzUwNy5jb25jYXQoYmluYXJ5T3BzXzUwOCkuY29uY2F0KHVuYXJ5T3BzXzUwOSkpO1xuY29uc3QgaXNOb25MaXRlcmFsS2V5d29yZF81MjQgPSBSLmFsbFBhc3MoW2lzS2V5d29yZF81MTIsIHNfNTY2ID0+IFIubm9uZShSLmVxdWFscyhzXzU2Ni52YWwoKSksIGxpdGVyYWxLZXl3b3Jkc180OTMpXSk7XG5jb25zdCBpc0tleXdvcmRFeHByUHJlZml4XzUyNSA9IFIuYWxsUGFzcyhbaXNLZXl3b3JkXzUxMiwgc181NjcgPT4gUi5hbnkoUi5lcXVhbHMoc181NjcudmFsKCkpLCBbXCJpbnN0YW5jZW9mXCIsIFwidHlwZW9mXCIsIFwiZGVsZXRlXCIsIFwidm9pZFwiLCBcInlpZWxkXCIsIFwidGhyb3dcIiwgXCJuZXdcIiwgXCJjYXNlXCJdKV0pO1xubGV0IGxhc3RfNTI2ID0gcF81NjggPT4gcF81NjgubGFzdCgpO1xubGV0IHNhZmVMYXN0XzUyNyA9IFIucGlwZShSLmNvbmQoW1tpc0VtcHR5XzUxMCwgUi5hbHdheXMoTm90aGluZ180ODkoKSldLCBbUi5ULCBSLmNvbXBvc2UoTWF5YmUub2YsIGxhc3RfNTI2KV1dKSk7XG5sZXQgc3R1ZmZUcnVlXzUyOCA9IFIuY3VycnkoKHBfNTY5LCBiXzU3MCkgPT4gYl81NzAgPyBKdXN0XzQ4OChwXzU2OSkgOiBOb3RoaW5nXzQ4OSgpKTtcbmxldCBzdHVmZkZhbHNlXzUyOSA9IFIuY3VycnkoKHBfNTcxLCBiXzU3MikgPT4gIWJfNTcyID8gSnVzdF80ODgocF81NzEpIDogTm90aGluZ180ODkoKSk7XG5sZXQgaXNUb3BDb2xvbl81MzAgPSBSLnBpcGUoc2FmZUxhc3RfNTI3LCBSLm1hcChpc0NvbG9uXzUyMSksIE1heWJlLm1heWJlKGZhbHNlLCBSLmlkZW50aXR5KSk7XG5sZXQgaXNUb3BQdW5jdHVhdG9yXzUzMSA9IFIucGlwZShzYWZlTGFzdF81MjcsIFIubWFwKGlzUHVuY3R1YXRvcl81MTEpLCBNYXliZS5tYXliZShmYWxzZSwgUi5pZGVudGl0eSkpO1xubGV0IGlzRXhwclJldHVybl81MzIgPSBSLmN1cnJ5KChsXzU3MywgcF81NzQpID0+IHtcbiAgbGV0IHJldEt3ZF81NzUgPSBzYWZlTGFzdF81MjcocF81NzQpO1xuICBsZXQgbWF5YmVEb3RfNTc2ID0gcG9wXzU0MyhwXzU3NCkuY2hhaW4oc2FmZUxhc3RfNTI3KTtcbiAgaWYgKG1heWJlRG90XzU3Ni5tYXAoaXNEb3RfNTIwKS5nZXRPckVsc2UoZmFsc2UpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIHJldEt3ZF81NzUubWFwKHNfNTc3ID0+IHtcbiAgICByZXR1cm4gc181NzcuaXNLZXl3b3JkKCkgJiYgc181NzcudmFsKCkgPT09IFwicmV0dXJuXCIgJiYgc181NzcubGluZU51bWJlcigpID09PSBsXzU3MztcbiAgfSkuZ2V0T3JFbHNlKGZhbHNlKTtcbn0pO1xuY29uc3QgaXNUb3BPcGVyYXRvcl81MzMgPSBSLnBpcGUoc2FmZUxhc3RfNTI3LCBSLm1hcChpc09wZXJhdG9yXzUyMyksIE1heWJlLm1heWJlKGZhbHNlLCBSLmlkZW50aXR5KSk7XG5jb25zdCBpc1RvcEtleXdvcmRFeHByUHJlZml4XzUzNCA9IFIucGlwZShzYWZlTGFzdF81MjcsIFIubWFwKGlzS2V5d29yZEV4cHJQcmVmaXhfNTI1KSwgTWF5YmUubWF5YmUoZmFsc2UsIFIuaWRlbnRpdHkpKTtcbmxldCBpc0V4cHJQcmVmaXhfNTM1ID0gUi5jdXJyeSgobF81NzgsIGJfNTc5KSA9PiBSLmNvbmQoW1tpc0VtcHR5XzUxMCwgUi5hbHdheXMoYl81NzkpXSwgW2lzVG9wQ29sb25fNTMwLCBSLmFsd2F5cyhiXzU3OSldLCBbaXNUb3BLZXl3b3JkRXhwclByZWZpeF81MzQsIFIuVF0sIFtpc1RvcE9wZXJhdG9yXzUzMywgUi5UXSwgW2lzVG9wUHVuY3R1YXRvcl81MzEsIFIuYWx3YXlzKGJfNTc5KV0sIFtpc0V4cHJSZXR1cm5fNTMyKGxfNTc4KSwgUi5UXSwgW1IuVCwgUi5GXV0pKTtcbmxldCBjdXJseV81MzYgPSBwXzU4MCA9PiBzYWZlTGFzdF81MjcocF81ODApLm1hcChpc0JyYWNlc181MTUpLmNoYWluKHN0dWZmVHJ1ZV81MjgocF81ODApKTtcbmxldCBwYXJlbl81MzcgPSBwXzU4MSA9PiBzYWZlTGFzdF81MjcocF81ODEpLm1hcChpc1BhcmVuc181MTQpLmNoYWluKHN0dWZmVHJ1ZV81MjgocF81ODEpKTtcbmxldCBmdW5jXzUzOCA9IHBfNTgyID0+IHNhZmVMYXN0XzUyNyhwXzU4MikubWFwKGlzRnVuY3Rpb25LZXl3b3JkXzUyMikuY2hhaW4oc3R1ZmZUcnVlXzUyOChwXzU4MikpO1xubGV0IGlkZW50XzUzOSA9IHBfNTgzID0+IHNhZmVMYXN0XzUyNyhwXzU4MykubWFwKGlzSWRlbnRpZmllcl81MTcpLmNoYWluKHN0dWZmVHJ1ZV81MjgocF81ODMpKTtcbmxldCBub25MaXRlcmFsS2V5d29yZF81NDAgPSBwXzU4NCA9PiBzYWZlTGFzdF81MjcocF81ODQpLm1hcChpc05vbkxpdGVyYWxLZXl3b3JkXzUyNCkuY2hhaW4oc3R1ZmZUcnVlXzUyOChwXzU4NCkpO1xubGV0IG9wdF81NDEgPSBSLmN1cnJ5KChhXzU4NSwgYl81ODYsIHBfNTg3KSA9PiB7XG4gIGxldCByZXN1bHRfNTg4ID0gUi5waXBlSyhhXzU4NSwgYl81ODYpKE1heWJlLm9mKHBfNTg3KSk7XG4gIHJldHVybiBNYXliZS5pc0p1c3QocmVzdWx0XzU4OCkgPyByZXN1bHRfNTg4IDogTWF5YmUub2YocF81ODcpO1xufSk7XG5sZXQgbm90RG90XzU0MiA9IFIuaWZFbHNlKFIud2hlcmVFcSh7c2l6ZTogMH0pLCBKdXN0XzQ4OCwgcF81ODkgPT4gc2FmZUxhc3RfNTI3KHBfNTg5KS5tYXAoc181OTAgPT4gIShzXzU5MC5pc1B1bmN0dWF0b3IoKSAmJiBzXzU5MC52YWwoKSA9PT0gXCIuXCIpKS5jaGFpbihzdHVmZlRydWVfNTI4KHBfNTg5KSkpO1xubGV0IHBvcF81NDMgPSBSLmNvbXBvc2UoSnVzdF80ODgsIHBfNTkxID0+IHBfNTkxLnBvcCgpKTtcbmNvbnN0IGZ1bmN0aW9uUHJlZml4XzU0NCA9IFIucGlwZUsoY3VybHlfNTM2LCBwb3BfNTQzLCBwYXJlbl81MzcsIHBvcF81NDMsIG9wdF81NDEoaWRlbnRfNTM5LCBwb3BfNTQzKSwgZnVuY181MzgpO1xuY29uc3QgaXNSZWdleFByZWZpeF81NDUgPSBiXzU5MiA9PiBSLmFueVBhc3MoW2lzRW1wdHlfNTEwLCBpc1RvcFB1bmN0dWF0b3JfNTMxLCBSLnBpcGUoTWF5YmUub2YsIFIucGlwZUsobm9uTGl0ZXJhbEtleXdvcmRfNTQwLCBwb3BfNTQzLCBub3REb3RfNTQyKSwgTWF5YmUuaXNKdXN0KSwgUi5waXBlKE1heWJlLm9mLCBSLnBpcGVLKHBhcmVuXzUzNywgcG9wXzU0Mywgbm9uTGl0ZXJhbEtleXdvcmRfNTQwLCBwb3BfNTQzLCBub3REb3RfNTQyKSwgTWF5YmUuaXNKdXN0KSwgUi5waXBlKE1heWJlLm9mLCBmdW5jdGlvblByZWZpeF81NDQsIFIuY2hhaW4ocF81OTMgPT4ge1xuICByZXR1cm4gc2FmZUxhc3RfNTI3KHBfNTkzKS5tYXAoc181OTQgPT4gc181OTQubGluZU51bWJlcigpKS5jaGFpbihmbkxpbmVfNTk1ID0+IHtcbiAgICByZXR1cm4gcG9wXzU0MyhwXzU5MykubWFwKGlzRXhwclByZWZpeF81MzUoZm5MaW5lXzU5NSwgYl81OTIpKTtcbiAgfSkuY2hhaW4oc3R1ZmZGYWxzZV81MjkocF81OTMpKTtcbn0pLCBNYXliZS5pc0p1c3QpLCBwXzU5NiA9PiB7XG4gIGxldCBpc0N1cmx5XzU5NyA9IE1heWJlLmlzSnVzdChzYWZlTGFzdF81MjcocF81OTYpLm1hcChpc0JyYWNlc181MTUpKTtcbiAgbGV0IGFscmVhZHlDaGVja2VkRnVuY3Rpb25fNTk4ID0gUi5waXBlKE1heWJlLm9mLCBmdW5jdGlvblByZWZpeF81NDQsIE1heWJlLmlzSnVzdCkocF81OTYpO1xuICBpZiAoYWxyZWFkeUNoZWNrZWRGdW5jdGlvbl81OTgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIFIucGlwZShNYXliZS5vZiwgUi5jaGFpbihjdXJseV81MzYpLCBSLmNoYWluKHBfNTk5ID0+IHtcbiAgICByZXR1cm4gc2FmZUxhc3RfNTI3KHBfNTk5KS5tYXAoc182MDAgPT4gc182MDAubGluZU51bWJlcigpKS5jaGFpbihjdXJseUxpbmVfNjAxID0+IHtcbiAgICAgIHJldHVybiBwb3BfNTQzKHBfNTk5KS5tYXAoaXNFeHByUHJlZml4XzUzNShjdXJseUxpbmVfNjAxLCBiXzU5MikpO1xuICAgIH0pLmNoYWluKHN0dWZmRmFsc2VfNTI5KHBfNTk5KSk7XG4gIH0pLCBNYXliZS5pc0p1c3QpKHBfNTk2KTtcbn1dKTtcbmZ1bmN0aW9uIGxhc3RFbF81NDYobF82MDIpIHtcbiAgcmV0dXJuIGxfNjAyW2xfNjAyLmxlbmd0aCAtIDFdO1xufVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVhZGVyIGV4dGVuZHMgVG9rZW5pemVyIHtcbiAgY29uc3RydWN0b3Ioc3RyaW5nc182MDMsIGNvbnRleHRfNjA0LCByZXBsYWNlbWVudHNfNjA1KSB7XG4gICAgc3VwZXIoQXJyYXkuaXNBcnJheShzdHJpbmdzXzYwMykgPyBzdHJpbmdzXzYwMy5qb2luKFwiXCIpIDogc3RyaW5nc182MDMpO1xuICAgIHRoaXMuZGVsaW1TdGFjayA9IG5ldyBNYXA7XG4gICAgdGhpcy5pbnNpZGVTeW50YXhUZW1wbGF0ZSA9IFtmYWxzZV07XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dF82MDQ7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3RyaW5nc182MDMpKSB7XG4gICAgICBsZXQgdG90YWxJbmRleCA9IDA7XG4gICAgICB0aGlzLnJlcGxhY2VtZW50SW5kZXggPSBSLnJlZHVjZSgoYWNjXzYwNiwgc3RyUmVwXzYwNykgPT4ge1xuICAgICAgICBhY2NfNjA2LnB1c2goe2luZGV4OiB0b3RhbEluZGV4ICsgc3RyUmVwXzYwN1swXS5sZW5ndGgsIHJlcGxhY2VtZW50OiBzdHJSZXBfNjA3WzFdfSk7XG4gICAgICAgIHRvdGFsSW5kZXggKz0gc3RyUmVwXzYwN1swXS5sZW5ndGg7XG4gICAgICAgIHJldHVybiBhY2NfNjA2O1xuICAgICAgfSwgW10sIFIuemlwKHN0cmluZ3NfNjAzLCByZXBsYWNlbWVudHNfNjA1KSk7XG4gICAgfVxuICB9XG4gIHJlYWQoc3RhY2tfNjA4ID0gW10sIGJfNjA5ID0gZmFsc2UsIHNpbmdsZURlbGltaXRlcl82MTAgPSBmYWxzZSkge1xuICAgIGxldCBwcmVmaXhfNjExID0gTGlzdCgpO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBsZXQgdG9rID0gdGhpcy5hZHZhbmNlKHByZWZpeF82MTEsIGJfNjA5KTtcbiAgICAgIGlmICh0b2sgaW5zdGFuY2VvZiBTeW50YXggfHwgdG9rIGluc3RhbmNlb2YgVGVybSkge1xuICAgICAgICBzdGFja182MDgucHVzaCh0b2spO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHRvaykpIHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoc3RhY2tfNjA4LCB0b2spO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChMaXN0LmlzTGlzdCh0b2spKSB7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHN0YWNrXzYwOCwgdG9rLnRvQXJyYXkoKSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGlzRU9TXzUwMCh0b2spKSB7XG4gICAgICAgIGlmIChzdGFja182MDhbMF0gJiYgaXNMZWZ0RGVsaW1pdGVyXzUwNChzdGFja182MDhbMF0udG9rZW4pKSB7XG4gICAgICAgICAgdGhyb3cgdGhpcy5jcmVhdGVVbmV4cGVjdGVkKHRvayk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoaXNMZWZ0RGVsaW1pdGVyXzUwNCh0b2spKSB7XG4gICAgICAgIGlmIChpc0xlZnRTeW50YXhfNTAyKHRvaykpIHtcbiAgICAgICAgICB0aGlzLmluc2lkZVN5bnRheFRlbXBsYXRlLnB1c2godHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmUgPSB0b2suc2xpY2Uuc3RhcnRMb2NhdGlvbi5saW5lO1xuICAgICAgICBsZXQgaW5uZXJCID0gaXNMZWZ0QnJhY2VfNDk1KHRvaykgPyBpc0V4cHJQcmVmaXhfNTM1KGxpbmUsIGJfNjA5KShwcmVmaXhfNjExKSA6IHRydWU7XG4gICAgICAgIGxldCBpbm5lciA9IHRoaXMucmVhZChbbmV3IFN5bnRheCh0b2spXSwgaW5uZXJCLCBmYWxzZSk7XG4gICAgICAgIGxldCBzdHggPSBuZXcgU3ludGF4KGlubmVyLCB0aGlzLmNvbnRleHQpO1xuICAgICAgICBwcmVmaXhfNjExID0gcHJlZml4XzYxMS5jb25jYXQoc3R4KTtcbiAgICAgICAgc3RhY2tfNjA4LnB1c2goc3R4KTtcbiAgICAgICAgaWYgKHNpbmdsZURlbGltaXRlcl82MTApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc1JpZ2h0RGVsaW1pdGVyXzUwNSh0b2spKSB7XG4gICAgICAgIGlmIChzdGFja182MDhbMF0gJiYgIWlzTWF0Y2hpbmdEZWxpbWl0ZXJzXzUwNihzdGFja182MDhbMF0udG9rZW4sIHRvaykpIHtcbiAgICAgICAgICB0aHJvdyB0aGlzLmNyZWF0ZVVuZXhwZWN0ZWQodG9rKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3R4ID0gbmV3IFN5bnRheCh0b2ssIHRoaXMuY29udGV4dCk7XG4gICAgICAgIHN0YWNrXzYwOC5wdXNoKHN0eCk7XG4gICAgICAgIGlmIChsYXN0RWxfNTQ2KHRoaXMuaW5zaWRlU3ludGF4VGVtcGxhdGUpICYmIGlzUmlnaHRTeW50YXhfNTAzKHRvaykpIHtcbiAgICAgICAgICB0aGlzLmluc2lkZVN5bnRheFRlbXBsYXRlLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHN0eCA9IG5ldyBTeW50YXgodG9rLCB0aGlzLmNvbnRleHQpO1xuICAgICAgICBwcmVmaXhfNjExID0gcHJlZml4XzYxMS5jb25jYXQoc3R4KTtcbiAgICAgICAgc3RhY2tfNjA4LnB1c2goc3R4KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIExpc3Qoc3RhY2tfNjA4KTtcbiAgfVxuICBhZHZhbmNlKHByZWZpeF82MTIsIGJfNjEzKSB7XG4gICAgbGV0IHN0YXJ0TG9jYXRpb25fNjE0ID0gdGhpcy5nZXRMb2NhdGlvbigpO1xuICAgIHRoaXMubGFzdEluZGV4ID0gdGhpcy5pbmRleDtcbiAgICB0aGlzLmxhc3RMaW5lID0gdGhpcy5saW5lO1xuICAgIHRoaXMubGFzdExpbmVTdGFydCA9IHRoaXMubGluZVN0YXJ0O1xuICAgIHRoaXMuc2tpcENvbW1lbnQoKTtcbiAgICB0aGlzLnN0YXJ0SW5kZXggPSB0aGlzLmluZGV4O1xuICAgIHRoaXMuc3RhcnRMaW5lID0gdGhpcy5saW5lO1xuICAgIHRoaXMuc3RhcnRMaW5lU3RhcnQgPSB0aGlzLmxpbmVTdGFydDtcbiAgICBpZiAodGhpcy5yZXBsYWNlbWVudEluZGV4ICYmIHRoaXMucmVwbGFjZW1lbnRJbmRleFswXSAmJiB0aGlzLmluZGV4ID49IHRoaXMucmVwbGFjZW1lbnRJbmRleFswXS5pbmRleCkge1xuICAgICAgbGV0IHJlcCA9IHRoaXMucmVwbGFjZW1lbnRJbmRleFswXS5yZXBsYWNlbWVudDtcbiAgICAgIHRoaXMucmVwbGFjZW1lbnRJbmRleC5zaGlmdCgpO1xuICAgICAgcmV0dXJuIHJlcDtcbiAgICB9XG4gICAgbGV0IGNoYXJDb2RlXzYxNSA9IHRoaXMuc291cmNlLmNoYXJDb2RlQXQodGhpcy5pbmRleCk7XG4gICAgaWYgKGNoYXJDb2RlXzYxNSA9PT0gOTYpIHtcbiAgICAgIGxldCBlbGVtZW50LCBpdGVtcyA9IFtdO1xuICAgICAgbGV0IHN0YXJ0TG9jYXRpb25fNjE0ID0gdGhpcy5nZXRMb2NhdGlvbigpO1xuICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5pbmRleDtcbiAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgIGlmIChsYXN0RWxfNTQ2KHRoaXMuaW5zaWRlU3ludGF4VGVtcGxhdGUpKSB7XG4gICAgICAgIGxldCBzbGljZSA9IHRoaXMuZ2V0U2xpY2Uoc3RhcnQsIHN0YXJ0TG9jYXRpb25fNjE0KTtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBSU1lOVEFYXzQ5MSwgdmFsdWU6IFwiYFwiLCBzbGljZTogc2xpY2V9O1xuICAgICAgfVxuICAgICAgZG8ge1xuICAgICAgICBlbGVtZW50ID0gdGhpcy5zY2FuVGVtcGxhdGVFbGVtZW50KCk7XG4gICAgICAgIGl0ZW1zLnB1c2goZWxlbWVudCk7XG4gICAgICAgIGlmIChlbGVtZW50LmludGVycCkge1xuICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLnJlYWQoW10sIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICBhc3NlcnQoZWxlbWVudC5zaXplID09PSAxLCBcInNob3VsZCBvbmx5IGhhdmUgcmVhZCBhIHNpbmdsZSBkZWxpbWl0ZXIgaW5zaWRlIGEgdGVtcGxhdGVcIik7XG4gICAgICAgICAgaXRlbXMucHVzaChlbGVtZW50LmdldCgwKSk7XG4gICAgICAgIH1cbiAgICAgIH0gd2hpbGUgKCFlbGVtZW50LnRhaWwpO1xuICAgICAgcmV0dXJuIHt0eXBlOiBUb2tlblR5cGUuVEVNUExBVEUsIGl0ZW1zOiBMaXN0KGl0ZW1zKX07XG4gICAgfSBlbHNlIGlmIChjaGFyQ29kZV82MTUgPT09IDM1KSB7XG4gICAgICBsZXQgc3RhcnRMb2NhdGlvbl82MTQgPSB0aGlzLmdldExvY2F0aW9uKCk7XG4gICAgICBsZXQgc3RhcnQgPSB0aGlzLmluZGV4O1xuICAgICAgbGV0IHNsaWNlID0gdGhpcy5nZXRTbGljZShzdGFydCwgc3RhcnRMb2NhdGlvbl82MTQpO1xuICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgaWYgKHRoaXMuc291cmNlLmNoYXJDb2RlQXQodGhpcy5pbmRleCkgPT09IDk2KSB7XG4gICAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBMU1lOVEFYXzQ5MCwgdmFsdWU6IFwiI2BcIiwgc2xpY2U6IHNsaWNlfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7dHlwZTogVG9rZW5UeXBlLklERU5USUZJRVIsIHZhbHVlOiBcIiNcIiwgc2xpY2U6IHNsaWNlfTtcbiAgICB9IGVsc2UgaWYgKGNoYXJDb2RlXzYxNSA9PT0gNjQpIHtcbiAgICAgIGxldCBzdGFydExvY2F0aW9uXzYxNCA9IHRoaXMuZ2V0TG9jYXRpb24oKTtcbiAgICAgIGxldCBzdGFydCA9IHRoaXMuaW5kZXg7XG4gICAgICBsZXQgc2xpY2UgPSB0aGlzLmdldFNsaWNlKHN0YXJ0LCBzdGFydExvY2F0aW9uXzYxNCk7XG4gICAgICB0aGlzLmluZGV4Kys7XG4gICAgICByZXR1cm4ge3R5cGU6IEFUXzQ5MiwgdmFsdWU6IFwiQFwiLCBzbGljZTogc2xpY2V9O1xuICAgIH1cbiAgICBsZXQgbG9va2FoZWFkXzYxNiA9IHN1cGVyLmFkdmFuY2UoKTtcbiAgICBpZiAobG9va2FoZWFkXzYxNi50eXBlID09PSBUb2tlblR5cGUuRElWICYmIGlzUmVnZXhQcmVmaXhfNTQ1KGJfNjEzKShwcmVmaXhfNjEyKSkge1xuICAgICAgcmV0dXJuIHN1cGVyLnNjYW5SZWdFeHAoXCIvXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbG9va2FoZWFkXzYxNjtcbiAgfVxuICBzY2FuVGVtcGxhdGVFbGVtZW50KCkge1xuICAgIGxldCBzdGFydExvY2F0aW9uXzYxNyA9IHRoaXMuZ2V0TG9jYXRpb24oKTtcbiAgICBsZXQgc3RhcnRfNjE4ID0gdGhpcy5pbmRleDtcbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMuc291cmNlLmxlbmd0aCkge1xuICAgICAgbGV0IGNoID0gdGhpcy5zb3VyY2UuY2hhckNvZGVBdCh0aGlzLmluZGV4KTtcbiAgICAgIHN3aXRjaCAoY2gpIHtcbiAgICAgICAgY2FzZSA5NjpcbiAgICAgICAgICBsZXQgc2xpY2UgPSB0aGlzLmdldFNsaWNlKHN0YXJ0XzYxOCwgc3RhcnRMb2NhdGlvbl82MTcpO1xuICAgICAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgICAgICByZXR1cm4ge3R5cGU6IFRva2VuVHlwZS5URU1QTEFURSwgdGFpbDogdHJ1ZSwgaW50ZXJwOiBmYWxzZSwgc2xpY2U6IHNsaWNlfTtcbiAgICAgICAgY2FzZSAzNjpcbiAgICAgICAgICBpZiAodGhpcy5zb3VyY2UuY2hhckNvZGVBdCh0aGlzLmluZGV4ICsgMSkgPT09IDEyMykge1xuICAgICAgICAgICAgbGV0IHNsaWNlID0gdGhpcy5nZXRTbGljZShzdGFydF82MTgsIHN0YXJ0TG9jYXRpb25fNjE3KTtcbiAgICAgICAgICAgIHRoaXMuaW5kZXggKz0gMTtcbiAgICAgICAgICAgIHJldHVybiB7dHlwZTogVG9rZW5UeXBlLlRFTVBMQVRFLCB0YWlsOiBmYWxzZSwgaW50ZXJwOiB0cnVlLCBzbGljZTogc2xpY2V9O1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgOTI6XG4gICAgICAgICAge1xuICAgICAgICAgICAgbGV0IG9jdGFsID0gdGhpcy5zY2FuU3RyaW5nRXNjYXBlKFwiXCIsIG51bGwpWzFdO1xuICAgICAgICAgICAgaWYgKG9jdGFsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgdGhyb3cgdGhpcy5jcmVhdGVJTExFR0FMKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyB0aGlzLmNyZWF0ZUlMTEVHQUwoKTtcbiAgfVxufVxuIl19